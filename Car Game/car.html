<!DOCTYPE html>
<html>
  <head>
    <title>Democracy drive</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        perspective: 1000px;
        background: linear-gradient(to bottom, #2980b9, #3498db, #85c1e9);
        color: #ffffff;
        font-family: "Noto Sans", sans-serif;
        text-rendering: optimizeLegibility;
      }

      #game-container {
        position: relative;
        height: 100vh;
        transform-style: preserve-3d;
        background: rgba(255, 255, 255, 0.1);
      }

      #road {
        position: absolute;
        width: 1000px;
        height: 100vh;
        background: linear-gradient(90deg, #333 0%, #444 50%, #333 100%);
        left: 50%;
        transform: translateX(-50%) rotateX(60deg);
        transform-origin: center bottom;
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
      }

      #player {
        position: absolute;
        width: 60px;
        height: 100px;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        transition: left 0.2s;
        z-index: 1000;
      }

      .car-body {
        position: relative;
        width: 100%;
        height: 100%;
      }

      /* Car Design */
      .car-top {
        position: absolute;
        width: 70%;
        height: 40%;
        background: linear-gradient(45deg, #e74c3c, #c0392b);
        top: 10%;
        left: 15%;
        border-radius: 10px 10px 0 0;
      }

      .car-bottom {
        position: absolute;
        width: 100%;
        height: 50%;
        background: linear-gradient(45deg, #e74c3c, #c0392b);
        bottom: 0;
        border-radius: 10px;
      }

      .window {
        position: absolute;
        width: 60%;
        height: 50%;
        background: #2c3e50;
        top: 20%;
        left: 20%;
        border-radius: 5px;
      }

      .wheel {
        position: absolute;
        width: 20px;
        height: 40px;
        background: #2c3e50;
        bottom: -5px;
        border-radius: 10px;
      }

      .wheel-left {
        left: 5px;
      }

      .wheel-right {
        right: 5px;
      }

      .headlight {
        position: absolute;
        width: 10px;
        height: 10px;
        background: #f1c40f;
        bottom: 10px;
        border-radius: 50%;
        box-shadow: 0 0 10px #f1c40f;
      }

      .headlight-left {
        left: 5px;
      }

      .headlight-right {
        right: 5px;
      }

      .obstacle {
        position: absolute;
        width: 50px;
        height: 50px;
        background: linear-gradient(45deg, #2ed573, #7bed9f);
        transform: translateX(-50%) rotateX(-60deg);
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(46, 213, 115, 0.5);
      }

      #score,
      #speed-boost {
        position: fixed;
        padding: 10px 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border-radius: 10px;
        z-index: 1000;
      }

      #score {
        top: 110px;
        right: 20px;
      }

      #speed-boost {
        top: 110px;
        left: 20px;
      }

      /* Game Over Modal */
      .game-over-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        border: 2px solid #c4a484;
        border-radius: 15px;
        color: #e6d5b8;
        text-align: center;
        z-index: 2000;
        min-width: 300px;
        max-width: 500px;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
        padding: 0;
        overflow: hidden;
      }

      .game-over-content {
        position: relative;
        padding: 30px;
        background: rgba(0, 0, 0, 0.2);
      }

      .game-over-header {
        position: relative;
        margin-bottom: 30px;
        padding: 20px;
        border-bottom: 2px solid rgba(196, 164, 132, 0.3);
        background: linear-gradient(
          180deg,
          rgba(196, 164, 132, 0.1),
          transparent
        );
      }

      .game-over-header h2 {
        color: #e6d5b8;
        font-size: 32px;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }
      .score-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        margin: 10px 0;
        background: rgba(196, 164, 132, 0.05);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .score-item:hover {
        background: rgba(196, 164, 132, 0.1);
        transform: translateX(5px);
      }

      .score-label {
        font-size: 18px;
        color: #c4a484;
        letter-spacing: 1px;
      }

      .score-value {
        font-size: 24px;
        color: #e6d5b8;
        font-weight: bold;
      }

      .button-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
      }

      .game-button {
        padding: 15px 30px;
        font-size: 16px;
        text-transform: uppercase;
        letter-spacing: 2px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        border: 1px solid rgba(196, 164, 132, 0.3);
      }

      .new-game-btn {
        background: linear-gradient(
          135deg,
          rgba(46, 204, 113, 0.2),
          rgba(46, 204, 113, 0.3)
        );
        color: #98ff98;
        border-color: rgba(46, 204, 113, 0.5);
      }

      .continue-btn {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.2),
          rgba(231, 76, 60, 0.3)
        );
        color: #ffb3b3;
        border-color: rgba(231, 76, 60, 0.5);
      }

      .game-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .new-game-btn:hover {
        background: linear-gradient(
          135deg,
          rgba(46, 204, 113, 0.3),
          rgba(46, 204, 113, 0.4)
        );
      }

      .continue-btn:hover {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.3),
          rgba(231, 76, 60, 0.4)
        );
      }

      /* Decorative elements */
      .game-over-modal::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #c4a484 0%,
          #e6d5b8 50%,
          #c4a484 100%
        );
      }

      /* Animation */
      @keyframes modalAppear {
        from {
          opacity: 0;
          transform: translate(-50%, -60%);
        }
        to {
          opacity: 1;
          transform: translate(-50%, -50%);
        }
      }

      .game-over-modal.show {
        animation: modalAppear 0.5s ease forwards;
      }
      /* Start Screen */
      #start-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9)),
          url("path/to/constitution-background.jpg");
        background-size: cover;
        display: flex;
        text-align: center;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        z-index: 2000;
      }

      .start-btn {
        padding: 20px 40px;
        font-size: 24px;
        background: #ff9933;
        color: white;
        border: 3px solid #138808;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        border: none;
        border-radius: 30px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .start-btn:hover {
        transform: scale(1.1);
      }
      @keyframes coinCollect {
        0% {
          transform: scale(1) translateY(0);
          opacity: 1;
        }
        100% {
          transform: scale(2) translateY(-50px);
          opacity: 0;
        }
      }

      .coin-collect-text {
        position: absolute;
        color: gold;
        font-weight: bold;
        font-size: 20px;
        pointer-events: none;
        animation: floatUp 1s ease-out;
        z-index: 1000;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(0);
          opacity: 1;
        }
        100% {
          transform: translateY(-100px);
          opacity: 0;
        }
      }

      .coin {
        /* ... existing coin styles ... */
        animation: coinRotate 1s infinite linear;
      }
      .coin {
        position: absolute;
        width: 30px;
        height: 30px;
        background: radial-gradient(#ffd700, #ffa500);
        border-radius: 50%;
        transform: translateX(-50%) rotateX(-60deg);
        box-shadow: 0 0 15px gold;
      }

      .obstacle-basic {
        box-shadow: 0 0 20px rgba(46, 213, 115, 0.5);
      }

      .obstacle-large {
        box-shadow: 0 0 25px rgba(255, 71, 87, 0.6);
      }

      .obstacle-moving {
        box-shadow: 0 0 15px rgba(0, 115, 191, 0.5);
      }

      .coin-particle {
        position: absolute;
        width: 8px;
        height: 8px;
        background: radial-gradient(#ffd700, #ffa500);
        border-radius: 50%;
        box-shadow: 0 0 5px gold;
      }

      @keyframes coinRotate {
        0% {
          transform: translateX(-50%) rotateX(-60deg) rotateY(0deg);
        }
        100% {
          transform: translateX(-50%) rotateX(-60deg) rotateY(360deg);
        }
      }

      #coin-count {
        position: fixed;
        top: 110px;
        left: 190px;
        background: rgba(0, 0, 0, 0.7);
        color: gold;
        padding: 10px 20px;
        border-radius: 10px;
        z-index: 1000;
      }
      #nav-bar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        display: flex;
        border-bottom: 2px solid #c4a484;
        justify-content: space-between;
        align-items: center;
        padding: 15px 30px;
        z-index: 2000;
        color: white;
      }
      #nav-bar h2 {
        color: #e6d5b8;
        font-size: 24px;
        letter-spacing: 2px;
        text-transform: uppercase;
      }
      #nav-buttons {
        display: flex;
        gap: 15px;
      }

      .nav-button {
        right: 10px;
        background: linear-gradient(
          135deg,
          rgba(196, 164, 132, 0.2),
          rgba(196, 164, 132, 0.3)
        );
        color: #e6d5b8;
        border: 1px solid rgba(196, 164, 132, 0.3);
        padding: 12px 20px;
        font-size: 14px;
        letter-spacing: 1px;
        text-transform: uppercase;
        transition: all 0.3s ease;
      }
      .nav-button:hover {
        background: linear-gradient(
          135deg,
          rgba(196, 164, 132, 0.3),
          rgba(196, 164, 132, 0.4)
        );
        border-color: #c4a484;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      #instructions-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        background-size: cover;
        padding: 30px;
        border: 2px solid #c4a484;
        border-radius: 20px;
        color: #e6d5b8;
        text-align: left;
        z-index: 3000;
        max-width: 500px;
        max-height: 80vh;
        overflow-y: auto;
      }

      #instructions-modal h2 {
        margin-bottom: 20px;
      }

      #instructions-modal p {
        margin-bottom: 15px;
        line-height: 1.6;
      }

      .close-instructions {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.3),
          rgba(231, 76, 60, 0.4)
        );
        color: #e6d5b8;
        color: #e6d5b8;
        border: 1px solid rgba(231, 76, 60, 0.5);
        transition: all 0.3s ease;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        margin-top: 20px;
      }
      .close-instructions:hover {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.4),
          rgba(231, 76, 60, 0.5)
        );
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }
      @import url("https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap");

      .game-button {
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      .constitution-quiz {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 600px;
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        border: 2px solid #c4a484;
        border-radius: 15px;
        color: #e6d5b8;
        text-align: center;
        z-index: 3000;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
        font-family: "Noto Sans", sans-serif;
        padding: 0;
        overflow: hidden;
      }

      .quiz-content {
        position: relative;
        padding: 30px;
        background: rgba(0, 0, 0, 0.2);
      }

      .quiz-header {
        position: relative;
        margin-bottom: 30px;
        padding: 20px;
        border-bottom: 2px solid rgba(196, 164, 132, 0.3);
        background: linear-gradient(
          180deg,
          rgba(196, 164, 132, 0.1),
          transparent
        );
      }

      .quiz-header h2 {
        color: #e6d5b8;
        font-size: 28px;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        font-weight: 700;
      }

      .ashoka-chakra {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 50px;
        height: 50px;
        border: 2px solid #c4a484;
        border-radius: 50%;
        background: radial-gradient(circle at center, #e6d5b8, #c4a484);
        animation: rotate 20s linear infinite;
        opacity: 0.8;
      }

      .ashoka-chakra::before {
        content: "‚ò∏";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 30px;
        color: #1a1a2e;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      #quiz-question {
        font-size: 20px;
        margin: 25px 0;
        padding: 20px;
        background: rgba(196, 164, 132, 0.1);
        border-radius: 12px;
        color: #e6d5b8;
        line-height: 1.6;
        border: 1px solid rgba(196, 164, 132, 0.2);
      }

      #options-container {
        display: grid;
        gap: 15px;
        margin: 30px 0;
        padding: 0 10px;
      }

      .quiz-option {
        background: linear-gradient(
          135deg,
          rgba(196, 164, 132, 0.1),
          rgba(196, 164, 132, 0.2)
        );
        color: #e6d5b8;
        border: 1px solid rgba(196, 164, 132, 0.3);
        padding: 15px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .quiz-option:hover {
        background: linear-gradient(
          135deg,
          rgba(196, 164, 132, 0.3),
          rgba(196, 164, 132, 0.4)
        );
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        border-color: #c4a484;
      }

      .quiz-option:active {
        transform: translateY(1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      /* Decorative border */
      .constitution-quiz::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #c4a484 0%,
          #e6d5b8 50%,
          #c4a484 100%
        );
      }

      /* Scroll Design */
      .scroll-edge {
        position: absolute;
        width: 40px;
        height: 100%;
        top: 0;
        background: linear-gradient(
          to right,
          rgba(196, 164, 132, 0.2),
          transparent
        );
      }

      .scroll-edge-left {
        left: 0;
        border-right: 1px solid rgba(196, 164, 132, 0.3);
      }

      .scroll-edge-right {
        right: 0;
        transform: scaleX(-1);
      }

      /* Animation for options */
      @keyframes optionAppear {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .quiz-option {
        animation: optionAppear 0.5s ease forwards;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .constitution-quiz {
          width: 95%;
          margin: 10px;
        }

        .quiz-header h2 {
          font-size: 22px;
        }

        #quiz-question {
          font-size: 18px;
          padding: 15px;
        }

        .quiz-option {
          padding: 12px 20px;
          font-size: 14px;
        }
      }

      /* Correct/Wrong answer animations */
      @keyframes correctAnswer {
        0% {
          background: linear-gradient(
            135deg,
            rgba(40, 167, 69, 0.2),
            rgba(40, 167, 69, 0.3)
          );
        }
        100% {
          background: linear-gradient(
            135deg,
            rgba(40, 167, 69, 0.3),
            rgba(40, 167, 69, 0.4)
          );
        }
      }

      @keyframes wrongAnswer {
        0% {
          background: linear-gradient(
            135deg,
            rgba(220, 53, 69, 0.2),
            rgba(220, 53, 69, 0.3)
          );
        }
        100% {
          background: linear-gradient(
            135deg,
            rgba(220, 53, 69, 0.3),
            rgba(220, 53, 69, 0.4)
          );
        }
      }

      .correct-answer {
        animation: correctAnswer 0.5s forwards;
        border-color: #28a745 !important;
        color: #98ff98 !important;
      }

      .wrong-answer {
        animation: wrongAnswer 0.5s forwards;
        border-color: #dc3545 !important;
        color: #ffb3b3 !important;
      }
      .constitution-start {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        font-family: "Noto Sans", sans-serif;
      }

      .start-content {
        width: 90%;
        max-width: 800px;
        background: linear-gradient(
          135deg,
          rgba(26, 26, 46, 0.95),
          rgba(22, 33, 62, 0.95)
        );
        border: 2px solid #c4a484;
        border-radius: 15px;
        padding: 30px;
        color: #e6d5b8;
        box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow-y: auto;
      }
      .start-content::-webkit-scrollbar {
        width: 8px;
      }

      .start-content::-webkit-scrollbar-track {
        background: rgba(196, 164, 132, 0.1);
        border-radius: 4px;
      }

      .start-content::-webkit-scrollbar-thumb {
        background: rgba(196, 164, 132, 0.3);
        border-radius: 4px;
      }
      .start-header {
        text-align: center;
        padding: 10px;
        border-bottom: 2px solid rgba(196, 164, 132, 0.3);
        position: relative;
        margin-bottom: 30px;
      }

      .start-header h1 {
        color: #e6d5b8;
        font-size: 36px;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .instructions-panel {
        background: rgba(196, 164, 132, 0.1);
        border: 1px solid rgba(196, 164, 132, 0.2);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .instructions-panel h2 {
        color: #c4a484;
        font-size: 24px;
        margin-bottom: 20px;
        text-align: center;
      }

      .scroll-content {
        max-height: 250px;
        overflow-y: auto;
        padding-right: 10px;
      }

      .scroll-content::-webkit-scrollbar {
        width: 8px;
      }

      .scroll-content::-webkit-scrollbar-track {
        background: rgba(196, 164, 132, 0.1);
        border-radius: 4px;
      }

      .scroll-content::-webkit-scrollbar-thumb {
        background: rgba(196, 164, 132, 0.3);
        border-radius: 4px;
      }

      .scroll-content ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .scroll-content li {
        margin: 15px 0;
        display: flex;
        align-items: center;
        font-size: 16px;
        line-height: 1.6;
      }

      .icon {
        margin-right: 15px;
        font-size: 20px;
      }

      .player-info-panel {
        background: rgba(196, 164, 132, 0.1);
        border: 1px solid rgba(196, 164, 132, 0.2);
        border-radius: 12px;
        padding: 25px;
      }

      .input-group {
        margin-bottom: 20px;
      }

      .input-group input {
        width: 100%;
        padding: 12px 1px;
        background: rgba(22, 33, 62, 0.8);
        border: 1px solid rgba(196, 164, 132, 0.3);
        border-radius: 6px;
        color: #e6d5b8;
        font-size: 16px;
        transition: all 0.3s ease;
      }

      .input-group input:focus {
        outline: none;
        border-color: #c4a484;
        box-shadow: 0 0 10px rgba(196, 164, 132, 0.2);
      }

      .input-group input::placeholder {
        color: rgba(230, 213, 184, 0.5);
      }

      .consent-group {
        display: flex;
        align-items: center;
        margin-bottom: 25px;
        padding: 10px;
        background: rgba(22, 33, 62, 0.6);
        border-radius: 6px;
      }

      .consent-group input[type="checkbox"] {
        width: 20px;
        height: 20px;
        margin-right: 15px;
        cursor: pointer;
      }

      .consent-group label {
        color: #e6d5b8;
        font-size: 14px;
        cursor: pointer;
      }

      #start-game-btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(
          135deg,
          rgba(196, 164, 132, 0.3),
          rgba(196, 164, 132, 0.4)
        );
        border: 1px solid rgba(196, 164, 132, 0.5);
        border-radius: 8px;
        color: #e6d5b8;
        font-size: 18px;
        text-transform: uppercase;
        letter-spacing: 2px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      #start-game-btn:not(:disabled):hover {
        background: linear-gradient(
          135deg,
          rgba(196, 164, 132, 0.4),
          rgba(196, 164, 132, 0.5)
        );
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      #start-game-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Decorative elements */
      .start-content::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #c4a484 0%,
          #e6d5b8 50%,
          #c4a484 100%
        );
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .start-content {
          width: 95%;
          padding: 20px;
        }

        .start-header h1 {
          font-size: 28px;
        }

        .instructions-panel h2 {
          font-size: 20px;
        }

        .scroll-content li {
          font-size: 14px;
        }

        .icon {
          font-size: 18px;
        }

        #start-game-btn {
          font-size: 16px;
          padding: 12px;
        }
      }

      /* Animation */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .start-content {
        animation: fadeIn 0.8s ease-out;
      }
      #leaderboard-modal {
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        border: 2px solid #c4a484;
        color: #e6d5b8;
      }

      #leaderboard-modal table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }

      #leaderboard-modal th,
      #leaderboard-modal td {
        padding: 12px;
        text-align: center;
        border-bottom: 1px solid rgba(196, 164, 132, 0.2);
      }

      #leaderboard-modal th {
        background: rgba(196, 164, 132, 0.1);
        color: #c4a484;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* Achievements Modal */
      #achievements-modal {
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        border: 2px solid #c4a484;
        color: #e6d5b8;
      }

      /* Common Modal Styles */
      .modal-close-btn {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.3),
          rgba(231, 76, 60, 0.4)
        );
        color: #e6d5b8;
        border: 1px solid rgba(231, 76, 60, 0.5);
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
      }

      .modal-close-btn:hover {
        background: linear-gradient(
          135deg,
          rgba(231, 76, 60, 0.4),
          rgba(231, 76, 60, 0.5)
        );
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }
      /* Score, Speed, and Coin Display Container */
      .game-stats-container {
        position: fixed;
        top: 200px;
        right: 20px;
        display: flex;
        gap: 15px;
        z-index: 1000;
      }

      /* Common styles for all stat displays */
      .stat-display {
        background: linear-gradient(135deg, #1a1a2e, #16213e);
        border: 1px solid #c4a484;
        padding: 12px 20px;
        border-radius: 8px;
        color: #e6d5b8;
        font-family: "Noto Sans", sans-serif;
        min-width: 120px;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      /* Individual stat icons */
      .stat-icon {
        font-size: 18px;
        opacity: 0.9;
      }

      .stat-value {
        font-size: 16px;
        font-weight: 600;
        letter-spacing: 1px;
      }

      /* Specific colors for each stat */
      #score {
        border-left: 3px solid #ff9933;
      }

      #speed-boost {
        border-left: 3px solid #138808;
      }

      #coin-count {
        border-left: 3px solid #ffd700;
      }

      /* Hover effect */
      .stat-display:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
      }

      /* Animation for value changes */
      @keyframes valueChange {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .value-updated {
        animation: valueChange 0.3s ease;
      }
    </style>
  </head>
  <body>
    <!-- Add this to your HTML body, just before the start screen -->
    <div
      id="loading-screen"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, #2980b9, #3498db);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 2500;
        color: white;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
      "
    >
      <h1>Constitutional Journey Begins</h1>
      <div
        id="constitution-quote"
        style="
          max-width: 600px;
          font-style: italic;
          margin: 20px;
          font-size: 20px;
        "
      ></div>
      <div
        id="loading-progress"
        style="
          width: 300px;
          height: 20px;
          background: rgba(255, 255, 255, 0.2);
          border-radius: 10px;
          overflow: hidden;
        "
      >
        <div
          id="progress-bar"
          style="
            width: 0;
            height: 100%;
            background: #ff9933;
            transition: width 2s;
          "
        ></div>
      </div>
    </div>
    <div id="start-screen" class="constitution-start">
      <div class="start-content">
        <div class="start-header">
          <h1>Constitutional Runner</h1>
          <div class="ashoka-chakra"></div>
        </div>

        <div class="instructions-panel">
          <h2>Game Instructions</h2>
          <div class="scroll-content">
            <ul>
              <li>
                <span class="icon">‚å®Ô∏è</span> Use arrow keys (‚Üê ‚Üí) to move
                between lanes
              </li>
              <li>
                <span class="icon">üü¢</span> Dodge green obstacles (basic
                challenges)
              </li>
              <li>
                <span class="icon">üî¥</span> Avoid red obstacles (complex
                issues)
              </li>
              <li>
                <span class="icon">üìö</span> Answer constitutional questions to
                continue
              </li>
              <li>
                <span class="icon">üèÜ</span> Score points for constitutional
                resilience
              </li>
            </ul>
          </div>
        </div>

        <div class="player-info-panel">
          <div class="input-group">
            <input type="text" id="player-name" placeholder="Enter Your Name" />
          </div>

          <div class="consent-group">
            <input type="checkbox" id="consent-checkbox" />
            <label for="consent-checkbox">
              I understand the constitutional principles of the game
            </label>
          </div>

          <button id="start-game-btn" onclick="validateAndStartGame()" disabled>
            Begin Constitutional Journey
          </button>
        </div>
      </div>
    </div>
    <div id="game-container">
      <div id="road"></div>
      <div id="player">
        <div class="car-body">
          <div class="car-top">
            <div class="window"></div>
          </div>
          <div class="car-bottom">
            <div class="wheel wheel-left"></div>
            <div class="wheel wheel-right"></div>
            <div class="headlight headlight-left"></div>
            <div class="headlight headlight-right"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- Add this to your nav bar -->
    <div id="nav-bar">
      <h2>Constitutional Runner</h2>
      <div id="nav-buttons">
        <button class="nav-button" onclick="showInstructions()">
          Game Instructions
        </button>
        <button class="nav-button" onclick="showLeaderboard()">
          Leaderboard
        </button>
        <button class="nav-button" onclick="showAchievements()">
          Achievements
        </button>
      </div>
    </div>
    <div id="instructions-modal">
      <div style="position: relative; width: 100%">
        <button
          class="close-instructions-btn"
          onclick="closeInstructions()"
          style="
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
          "
        >
          ‚úï
        </button>
        <h2>Constitutional Runner</h2>

        <p>
          <strong>Game Concept:</strong> <br />
          Inspired by the spirit of the Indian Constitution, navigate through
          challenges <br />
          representing the principles of justice, liberty, equality, and
          fraternity!
        </p>

        <p>
          <strong>Constitutional Controls:</strong> <br />
          ‚Ä¢ ‚Üê Left Arrow: Move Left Lane <br />
          ‚Ä¢ ‚Üí Right Arrow: Move Right Lane <br />
          ‚Ä¢ Dodge obstacles representing societal challenges
        </p>

        <p>
          <strong>Scoring Philosophy:</strong> <br />
          ‚Ä¢ Each point represents your understanding of constitutional
          principles <br />
          ‚Ä¢ Survive longer to demonstrate constitutional resilience <br />
          ‚Ä¢ Collect coins symbolizing democratic empowerment
        </p>

        <p>
          <strong>Quiz Mechanism:</strong> <br />
          ‚Ä¢ After game over, answer constitutional knowledge questions <br />
          ‚Ä¢ Correct answers give you a chance to continue <br />
          ‚Ä¢ Demonstrates the importance of constitutional literacy
        </p>

        <p>
          <strong>Obstacle Meanings:</strong> <br />
          ‚Ä¢ Green Obstacles: Basic Societal Challenges <br />
          ‚Ä¢ Red Obstacles: Complex Systemic Issues <br />
          ‚Ä¢ Blue Obstacles: Dynamic Social Transformations
        </p>
        <button class="close-instructions" onclick="closeInstructions()">
          Understand Principles
        </button>
      </div>
    </div>
    <!-- Replace your existing score, speed, and coin displays with this -->
    <div class="game-stats-container">
      <div id="score" class="stat-display">
        <span class="stat-icon">üéØ</span>
        <span class="stat-value">Score: 0</span>
      </div>

      <div id="speed-boost" class="stat-display">
        <span class="stat-icon">‚ö°</span>
        <span class="stat-value">Speed: 0</span>
      </div>

      <div id="coin-count" class="stat-display">
        <span class="stat-icon">üí∞</span>
        <span class="stat-value">Coins: 0</span>
      </div>
    </div>
    <div id="game-over-modal" class="game-over-modal">
      <div class="game-over-content">
        <div class="game-over-header">
          <h2>Game Over!</h2>
        </div>

        <div class="score-display">
          <div class="score-item">
            <span class="score-label">Current Score</span>
            <span class="score-value" id="final-score">0</span>
          </div>
          <div class="score-item">
            <span class="score-label">High Score</span>
            <span class="score-value" id="high-score">0</span>
          </div>
          <div class="score-item">
            <span class="score-label">Coins Collected</span>
            <span class="score-value" id="final-coins">0</span>
          </div>
        </div>

        <div class="button-container">
          <button class="game-button new-game-btn" onclick="startNewGame()">
            New Game
          </button>
          <button class="game-button continue-btn" onclick="continueGame()">
            Continue
          </button>
        </div>
      </div>
    </div>
    <div id="quiz-modal" class="constitution-quiz">
      <div class="quiz-content">
        <div class="quiz-header">
          <h2>Constitutional Knowledge Test</h2>
          <div class="ashoka-chakra"></div>
        </div>
        <div class="quiz-body">
          <p id="quiz-question"></p>
          <div id="options-container"></div>
        </div>
      </div>
    </div>
    <div class="scroll-edge scroll-edge-left"></div>
    <div class="scroll-edge scroll-edge-right"></div>
    <script>
      function showLeaderboard() {
        // Create leaderboard modal
        const leaderboardModal = document.createElement("div");
        leaderboardModal.id = "leaderboard-modal";
        leaderboardModal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.95);
        padding: 30px;
        border-radius: 20px;
        color: white;
        text-align: center;
        z-index: 3000;
        min-width: 300px;
        max-width: 500px;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    `;

        // Retrieve leaderboard from localStorage or set up initial structure
        const leaderboard =
          JSON.parse(localStorage.getItem("constitutionalRunnerLeaderboard")) ||
          [];

        // Sort leaderboard by score in descending order
        leaderboard.sort((a, b) => b.score - a.score);

        // Create leaderboard content
        leaderboardModal.innerHTML = `
        <h2>Constitutional Runner Leaderboard</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Name</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody>
                ${leaderboard
                  .slice(0, 10)
                  .map(
                    (entry, index) => `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${entry.name}</td>
                        <td>${entry.score}</td>
                    </tr>
                `
                  )
                  .join("")}
            </tbody>
        </table>
        <button onclick="this.parentElement.remove()" style="
            margin-top: 20px;
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        ">Close</button>
    `;

        document.body.appendChild(leaderboardModal);
      }

      function showAchievements() {
        // Create achievements modal
        const achievementsModal = document.createElement("div");
        achievementsModal.id = "achievements-modal";
        achievementsModal.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.95);
        padding: 30px;
        border-radius: 20px;
        color: white;
        text-align: center;
        z-index: 3000;
        min-width: 300px;
        max-width: 500px;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    `;

        // Retrieve achievements from localStorage
        const achievements = JSON.parse(
          localStorage.getItem("constitutionalRunnerAchievements")
        ) || {
          firstRun: false,
          score100: false,
          coins50: false,
          survivalMaster: false,
        };

        // Create achievements content
        achievementsModal.innerHTML = `
        <h2>Constitutional Runner Achievements</h2>
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
            <div style="opacity: ${achievements.firstRun ? "1" : "0.5"}">
                <h3>First Run</h3>
                <p>Complete your first game</p>
                ${achievements.firstRun ? "üèÜ" : "‚ùì"}
            </div>
            <div style="opacity: ${achievements.score100 ? "1" : "0.5"}">
                <h3>Scoring Striker</h3>
                <p>Reach 100 points</p>
                ${achievements.score100 ? "üèÜ" : "‚ùì"}
            </div>
            <div style="opacity: ${achievements.coins50 ? "1" : "0.5"}">
                <h3>Coin Collector</h3>
                <p>Collect 50 coins</p>
                ${achievements.coins50 ? "üèÜ" : "‚ùì"}
            </div>
            <div style="opacity: ${achievements.survivalMaster ? "1" : "0.5"}">
                <h3>Survival Master</h3>
                <p>Survive 5 minutes</p>
                ${achievements.survivalMaster ? "üèÜ" : "‚ùì"}
            </div>
        </div>
        <button onclick="this.parentElement.remove()" style="
            margin-top: 20px;
            padding: 10px 20px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        ">Close</button>
    `;

        document.body.appendChild(achievementsModal);
      }

      // Modify your existing game logic to update achievements
      function updateAchievements() {
        const achievements = JSON.parse(
          localStorage.getItem("constitutionalRunnerAchievements")
        ) || {
          firstRun: false,
          score100: false,
          coins50: false,
          survivalMaster: false,
        };

        // First run achievement
        achievements.firstRun = true;

        // Score achievement
        if (score >= 100) {
          achievements.score100 = true;
        }

        // Coin achievement
        if (coinCount >= 50) {
          achievements.coins50 = true;
        }

        // Survival time achievement (you'll need to track game duration)
        // This is a placeholder - you'd need to implement actual time tracking
        if (gameTime >= 300) {
          // 5 minutes = 300 seconds
          achievements.survivalMaster = true;
        }

        localStorage.setItem(
          "constitutionalRunnerAchievements",
          JSON.stringify(achievements)
        );
      }
      // Add this to your script
      const constitutionQuotes = [
        "We, the people of India, having solemnly resolved to constitute India into a sovereign, socialist, secular, democratic republic...",
        "Justice, social, economic and political; Liberty of thought, expression, belief, faith and worship; Equality of status and of opportunity...",
        "The Constitution of India is not a mere lawyers' document, but a vehicle of life, and its spirit is to be found in how it touches the lives of the people.",
        "Our Constitution is not a mere political document, but a social document. It is based on the principles of social justice, liberty, equality, and fraternity.",
        "In a democratic republic, the most important thing is not the rigidity of the Constitution, but its adaptability.",
        "Constitutional morality is not a natural sentiment. It has to be cultivated.",
        "The greatness of a nation lies in its fidelity to its Constitution and its adherence to the rule of law.",
        "Liberty, equality, and fraternity are not to be treated as separate items in a trinity. They form a union of trinity in the sense that to divorce one from the other is to defeat the very purpose of democracy.",
        "A Constitution is not merely a document in black and white. It is a living document that evolves with the nation.",
        "The will of the people is the only legitimate foundation of any government, and to protect its free expression should be our first object.",
        "Democracy is not merely a form of government. It is primarily a mode of associated living, of conjoint communicated experience.",
        "The spirit of the Constitution is to provide equality of status and opportunity to every citizen.",
        "Every Indian should now forget that he is a Rajput, a Sikh or a Jat. He must remember that he is an Indian and he has every right in his country but with certain duties.",
        "A nation‚Äôs culture resides in the hearts and in the souls of its people.",
        "Our ability to reach unity in diversity will be the beauty and the test of our civilization.",
        "If I find the constitution being misused, I shall be the first to burn it.",
      ];

      function initLoadingScreen() {
        const loadingScreen = document.getElementById("loading-screen");
        const quoteElement = document.getElementById("constitution-quote");
        const progressBar = document.getElementById("progress-bar");

        // Select random quote
        const randomQuote =
          constitutionQuotes[
            Math.floor(Math.random() * constitutionQuotes.length)
          ];
        quoteElement.textContent = `"${randomQuote}"`;

        // Simulate loading
        setTimeout(() => {
          progressBar.style.width = "100%";
        }, 100);

        // Hide loading screen after loading
        setTimeout(() => {
          loadingScreen.style.opacity = "0";
          setTimeout(() => {
            loadingScreen.style.display = "none";
          }, 1000);
        }, 2500);
      }

      // Call this when the page loads
      window.addEventListener("load", initLoadingScreen);
      const patrioticSounds = {
        gameStart: new Audio("path/to/national-anthem-excerpt.mp3"),
        coinCollect: new Audio("path/to/democratic-cheer.mp3"),
        obstacleHit: new Audio("path/to/constitutional-challenge.mp3"),
      };
      // Game variables
      const player = document.getElementById("player");
      const gameContainer = document.getElementById("game-container");
      const scoreElement = document.getElementById("score");
      const speedBoostElement = document.getElementById("speed-boost");
      const gameOverModal = document.getElementById("game-over-modal");
      const coinCountElement = document.getElementById("coin-count");

      let score = 0;
      let isGameOver = false;
      let playerPosition = "center";
      let gameSpeed = 5;
      let speedBoost = 0;
      let lives = 3;
      let highScore = localStorage.getItem("highScore") || 0;
      let coinCount = 0;
      let laneMarkersInterval = null;
      let obstacleInterval = null;
      let canContinue = true;
      function showInstructions() {
        document.getElementById("instructions-modal").style.display = "block";
      }

      function closeInstructions() {
        document.getElementById("instructions-modal").style.display = "none";
      }
      function showGameOverModal() {
        const modal = document.getElementById("game-over-modal");
        document.getElementById("final-score").textContent = score;
        document.getElementById("high-score").textContent = highScore;
        document.getElementById("final-coins").textContent = coinCount;

        modal.style.display = "block";
        modal.classList.add("show");

        // Optional: Add sound effect
        if (patrioticSounds.gameOver) {
          patrioticSounds.gameOver.play();
        }
      }

      // Add this to hide the modal
      function hideGameOverModal() {
        const modal = document.getElementById("game-over-modal");
        modal.classList.remove("show");
        modal.style.display = "none";
      }
      function toggleSound() {
        const soundButton = document.querySelector(".nav-button:nth-child(2)");
        // Placeholder for sound toggle logic
        if (soundButton.textContent === "Sound: On") {
          soundButton.textContent = "Sound: Off";
          // Add sound off logic
        } else {
          soundButton.textContent = "Sound: On";
          // Add sound on logic
        }
      }
      // Constitution Quiz Questions
      const constitutionQuestions = [
        {
          question: "Who is known as the Father of the Indian Constitution?",
          answer: "dr br ambedkar",
          options: [
            "dr br ambedkar",
            "mahatma gandhi",
            "jawaharlal nehru",
            "sardar patel",
          ],
        },
        {
          question: "When was the Indian Constitution adopted?",
          answer: "26 november 1949",
          options: [
            "15 august 1947",
            "26 january 1950",
            "26 november 1949",
            "2 october 1948",
          ],
        },
        {
          question:
            "How many articles were there in the original Indian Constitution?",
          answer: "395",
          options: ["395", "448", "250", "500"],
        },
        {
          question: "Which is the longest written constitution in the world?",
          answer: "indian constitution",
          options: [
            "us constitution",
            "indian constitution",
            "british constitution",
            "russian constitution",
          ],
        },
      ];

      // Add quiz modal to body
      document.body.insertAdjacentHTML(
        "beforeend",
        `
    <div id="quiz-modal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
         background: rgba(0, 0, 0, 0.95); padding: 30px; border-radius: 20px; color: white; text-align: center; 
         z-index: 3000; min-width: 300px; box-shadow: 0 0 20px rgba(0,0,0,0.5);">
        <h2>Answer to Continue</h2>
        <p id="quiz-question" style="margin: 20px 0; font-size: 18px;"></p>
        <div id="options-container" style="display: flex; flex-direction: column; gap: 10px; margin: 20px 0;"></div>
    </div>
`
      );

      // Add lane marker style
      const style = document.createElement("style");
      style.textContent = `
    .lane-marker {
        position: absolute;
        width: 10px;
        height: 80px;
        background: white;
        left: 50%;
        transform: translateX(-50%) rotateX(60deg);
        opacity: 0.5;
    }
`;
      document.head.appendChild(style);

      // Modify your startGame function
      function startGame() {
        // Hide the start screen
        document.getElementById("start-screen").style.display = "none";

        // Show the navigation bar
        showNavBar();

        // Rest of your existing startGame logic
        resetGame();
        startGameElements();
      }

      // When the page first loads, hide the nav bar
      window.addEventListener("load", () => {
        hideNavBar();
      });

      // If you have a function that shows the start screen again (like after game over)
      function showStartScreen() {
        // Hide nav bar
        hideNavBar();

        // Show start screen
        document.getElementById("start-screen").style.display = "flex";
      }

      function resetGame() {
        score = 0;
        isGameOver = false;
        gameSpeed = 5;
        speedBoost = 0;
        coinCount = 0;
        clearGameElements();
      }

      function startGameElements() {
        createLaneMarkers();
        startObstacleCreation();
        increaseSpeed();
        gameLoop();
      }

      function startObstacleCreation() {
        // Clear any existing obstacle interval
        if (obstacleInterval) {
          clearInterval(obstacleInterval);
        }

        // Create initial obstacle
        createObstacle();

        // Set up new obstacle interval
        obstacleInterval = setInterval(() => {
          if (!isGameOver) {
            createObstacle();
          }
        }, 2000);
      }

      function clearGameElements() {
        if (laneMarkersInterval) {
          clearInterval(laneMarkersInterval);
          laneMarkersInterval = null;
        }
        if (obstacleInterval) {
          clearInterval(obstacleInterval);
          obstacleInterval = null;
        }

        document
          .querySelectorAll(".lane-marker, .obstacle, .coin")
          .forEach((el) => el.remove());
      }

      function createLaneMarkers() {
        if (laneMarkersInterval) clearInterval(laneMarkersInterval);

        laneMarkersInterval = setInterval(() => {
          if (isGameOver) return;

          const marker = document.createElement("div");
          marker.className = "lane-marker";
          marker.style.top = "-80px";
          gameContainer.appendChild(marker);

          let pos = -80;
          const moveMarker = setInterval(() => {
            if (isGameOver) {
              clearInterval(moveMarker);
              return;
            }

            pos += gameSpeed + speedBoost;
            marker.style.top = pos + "px";

            if (pos > window.innerHeight) {
              clearInterval(moveMarker);
              marker.remove();
            }
          }, 16);
        }, 300);
      }

      const obstacleTypes = [
        {
          class: "obstacle-basic",
          color: "#2ed573",
          points: 10,
          size: { width: 50, height: 50 },
        },
        {
          class: "obstacle-large",
          color: "#ff4757",
          points: 20,
          size: { width: 80, height: 80 },
        },
        {
          class: "obstacle-moving",
          color: "#89CFF0",
          points: 30,
          size: { width: 40, height: 40 },
        },
      ];

      function createObstacle() {
        if (isGameOver) return;

        const random = Math.random();
        let element;

        if (random < 0.3) {
          // 30% chance for coin
          element = createCoin();
        } else if (random < 0.35) {
          // 5% chance for power-up
          element = createPowerUp();
          if (!element) {
            element = createRandomObstacle();
          }
        } else {
          element = createRandomObstacle();
        }

        if (element) {
          gameContainer.appendChild(element);
          animateElement(element);
        }
      }
      function createRandomObstacle() {
        const obstacleType =
          obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
        const obstacle = document.createElement("div");

        obstacle.className = `obstacle ${obstacleType.class}`;
        obstacle.style.width = obstacleType.size.width + "px";
        obstacle.style.height = obstacleType.size.height + "px";
        obstacle.style.background = `linear-gradient(45deg, ${
          obstacleType.color
        }, ${adjustColor(obstacleType.color, 20)})`;
        obstacle.dataset.points = obstacleType.points;

        return obstacle;
      }

      function createCoin() {
        const coin = document.createElement("div");
        coin.className = "coin";
        return coin;
      }

      function animateElement(element) {
        let pos = -50;
        let horizontalOffset = 0;
        const isMoving = element.classList.contains("obstacle-moving");
        const startingLeft = Math.random() < 0.5 ? "35%" : "65%";
        element.style.left = startingLeft;

        const moveElement = setInterval(() => {
          if (isGameOver) {
            clearInterval(moveElement);
            return;
          }

          pos += gameSpeed + speedBoost;

          if (isMoving) {
            horizontalOffset = Math.sin(pos * 0.05) * 50;
            element.style.transform = `translateX(${horizontalOffset}px) translateX(-50%) rotateX(-60deg)`;
          }

          element.style.top = pos + "px";

          // Collision detection
          if (pos > window.innerHeight - 160 && pos < window.innerHeight - 40) {
            const playerRect = player.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();

            const horizontalDistance = Math.abs(
              playerRect.left +
                playerRect.width / 2 -
                (elementRect.left + elementRect.width / 2)
            );

            if (horizontalDistance < 50) {
              if (element.classList.contains("coin")) {
                collectCoin(element);
                clearInterval(moveElement);
                element.remove();
              } else {
                handleCollision();
                clearInterval(moveElement);
                element.remove();
              }
            }
          }

          if (pos > window.innerHeight) {
            clearInterval(moveElement);
            element.remove();
            if (element.classList.contains("obstacle")) {
              score += parseInt(element.dataset.points || 10);
              scoreElement.textContent = `Score: ${score}`;
            }
          }
        }, 16);
      }

      function collectCoin(coin) {
        coinCount++;
        coinCountElement.textContent = `Coins: ${coinCount}`;

        // Create floating text
        const floatingText = document.createElement("div");
        floatingText.className = "coin-collect-text";
        floatingText.textContent = "+1";
        floatingText.style.left = coin.style.left;
        floatingText.style.top = coin.style.top;
        gameContainer.appendChild(floatingText);

        // Create particle effect
        for (let i = 0; i < 8; i++) {
          createCoinParticle(coin);
        }

        setTimeout(() => floatingText.remove(), 1000);
      }

      function createCoinParticle(coin) {
        const particle = document.createElement("div");
        particle.className = "coin-particle";

        const coinRect = coin.getBoundingClientRect();
        const startX = coinRect.left + coinRect.width / 2;
        const startY = coinRect.top + coinRect.height / 2;

        particle.style.left = startX + "px";
        particle.style.top = startY + "px";

        const angle = Math.random() * Math.PI * 2;
        const velocity = 3 + Math.random() * 5;
        const vx = Math.cos(angle) * velocity;
        const vy = Math.sin(angle) * velocity;

        gameContainer.appendChild(particle);

        let time = 0;
        const animate = () => {
          time += 0.1;
          const x = startX + vx * time;
          const y = startY + vy * time + 2 * time * time;
          const scale = 1 - time / 2;

          particle.style.transform = `translate(${x - startX}px, ${
            y - startY
          }px) scale(${scale})`;
          particle.style.opacity = 1 - time / 2;

          if (time < 2) {
            requestAnimationFrame(animate);
          } else {
            particle.remove();
          }
        };

        requestAnimationFrame(animate);
      }
      function adjustColor(color, amount) {
        return (
          "#" +
          color
            .replace(/^#/, "")
            .replace(/../g, (color) =>
              (
                "0" +
                Math.min(
                  255,
                  Math.max(0, parseInt(color, 16) + amount)
                ).toString(16)
              ).substr(-2)
            )
        );
      }
      function createPowerUp() {
        if (Math.random() < 0.1) {
          // 10% chance to spawn power-up
          const powerUp = document.createElement("div");
          powerUp.className = "power-up";
          powerUp.style.cssText = `
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(#9b59b6, #8e44ad);
            border-radius: 50%;
            transform: translateX(-50%) rotateX(-60deg);
            box-shadow: 0 0 20px #9b59b6;
        `;
          powerUp.dataset.type = Math.random() < 0.5 ? "shield" : "speed";
          return powerUp;
        }
        return null;
      }
      function increaseSpeed() {
        setInterval(() => {
          if (!isGameOver && gameSpeed < 15) {
            gameSpeed += 0.5;
            speedBoostElement.textContent = `Speed: ${Math.floor(gameSpeed)}`;
          }
        }, 5000);
      }

      function handleCollision() {
        isGameOver = true;
        if (score > highScore) {
          highScore = score;
          localStorage.setItem("highScore", highScore);
        }
        showGameOverModal();
      }

      function showGameOverModal() {
        document.getElementById("final-score").textContent = score;
        document.getElementById("high-score").textContent = highScore;
        gameOverModal.style.display = "block";
      }

      function startNewGame() {
        canContinue = true;
        location.reload();
      }

      function continueGame() {
        if (!canContinue) {
          if (coinCount >= 5) {
            const confirmContinue = confirm(
              `Use 5 coins to continue? (Current coins: ${coinCount})`
            );
            if (confirmContinue) {
              coinCount -= 5;
              coinCountElement.textContent = `Coins: ${coinCount}`;
              showQuiz();
            } else {
              startNewGame();
            }
          } else {
            alert("Not enough coins to continue! Need at least 5 coins.");
            startNewGame();
          }
          return;
        }

        if (lives > 0) {
          showQuiz();
        } else {
          alert("No more continues left!");
          startNewGame();
        }
      }

      function showQuiz() {
        const quizModal = document.getElementById("quiz-modal");
        const questionElement = document.getElementById("quiz-question");
        const optionsContainer = document.getElementById("options-container");

        gameOverModal.style.display = "none";
        quizModal.style.display = "block";

        const randomQuestion =
          constitutionQuestions[
            Math.floor(Math.random() * constitutionQuestions.length)
          ];
        questionElement.textContent = randomQuestion.question;

        optionsContainer.innerHTML = "";
        randomQuestion.options.forEach((option, index) => {
          const button = document.createElement("button");
          button.textContent = option;
          button.className = "quiz-option";
          button.style.animationDelay = `${index * 0.1}s`;

          button.addEventListener("click", (e) => {
            // Remove any previous answer classes
            document.querySelectorAll(".quiz-option").forEach((btn) => {
              btn.classList.remove("correct-answer", "wrong-answer");
            });

            // Add appropriate class based on answer
            if (option.toLowerCase() === randomQuestion.answer) {
              e.target.classList.add("correct-answer");
              setTimeout(
                () => checkAnswer(option.toLowerCase(), randomQuestion.answer),
                1000
              );
            } else {
              e.target.classList.add("wrong-answer");
              setTimeout(
                () => checkAnswer(option.toLowerCase(), randomQuestion.answer),
                1000
              );
            }
          });

          optionsContainer.appendChild(button);
        });
      }
      function validateAndStartGame() {
        const playerName = document.getElementById("player-name").value.trim();
        const consentCheckbox = document.getElementById("consent-checkbox");

        if (playerName === "") {
          alert("Please enter your name to begin your constitutional journey!");
          return;
        }

        if (!consentCheckbox.checked) {
          alert("Please acknowledge the constitutional principles to proceed.");
          return;
        }

        // Store player name for potential future use
        localStorage.setItem("playerName", playerName);

        // Fade out start screen and begin game
        const startScreen = document.getElementById("start-screen");
        startScreen.style.transition = "opacity 0.5s ease";
        startScreen.style.opacity = "0";

        setTimeout(() => {
          startScreen.style.display = "none";
          startGame(); // Your existing startGame function
        }, 500);
      }

      // Enable/Disable start button based on inputs
      document
        .getElementById("player-name")
        .addEventListener("input", checkStartButton);
      document
        .getElementById("consent-checkbox")
        .addEventListener("change", checkStartButton);

      function checkStartButton() {
        const playerName = document.getElementById("player-name").value.trim();
        const consentCheckbox = document.getElementById("consent-checkbox");
        const startButton = document.getElementById("start-game-btn");

        startButton.disabled = !(playerName && consentCheckbox.checked);

        if (!startButton.disabled) {
          startButton.style.background =
            "linear-gradient(135deg, rgba(196, 164, 132, 0.5), rgba(196, 164, 132, 0.6))";
        } else {
          startButton.style.background =
            "linear-gradient(135deg, rgba(196, 164, 132, 0.3), rgba(196, 164, 132, 0.4))";
        }
      }
      function hideNavBar() {
        const navBar = document.getElementById("nav-bar");
        if (navBar) {
          navBar.style.display = "none";
        }
      }

      function showNavBar() {
        const navBar = document.getElementById("nav-bar");
        if (navBar) {
          navBar.style.display = "flex";
        }
      }

      function checkAnswer(userAnswer, correctAnswer) {
        const quizModal = document.getElementById("quiz-modal");

        if (userAnswer === correctAnswer) {
          quizModal.style.display = "none";
          lives--;
          isGameOver = false;
          canContinue = false;
          clearGameElements();
          createLaneMarkers();
          startObstacleCreation(); // Add this line to restart obstacle creation
          gameLoop();
        } else {
          alert("Wrong answer! Game Over!");
          quizModal.style.display = "none";
          startNewGame();
        }
      }

      function gameLoop() {
        if (!isGameOver) {
          score += 1;
          scoreElement.textContent = `Score: ${score}`;
          requestAnimationFrame(gameLoop);
        }
      }

      // Player Movement
      document.addEventListener("keydown", (e) => {
        if (isGameOver) return;

        const carBody = player.querySelector(".car-body");

        if (e.key === "ArrowLeft" && playerPosition !== "left") {
          player.style.left = "35%";
          playerPosition = "left";
          carBody.style.transform = "rotate(-15deg)";
        }
        if (e.key === "ArrowRight" && playerPosition !== "right") {
          player.style.left = "65%";
          playerPosition = "right";
          carBody.style.transform = "rotate(15deg)";
        }

        setTimeout(() => {
          carBody.style.transform = "rotate(0deg)";
        }, 200);
      });
    </script>
  </body>
</html>
